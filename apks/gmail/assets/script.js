var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.checkEs6ConformanceViaProxy=function(){try{var a={},b=Object.create(new $jscomp.global.Proxy(a,{get:function(c,d,f){return c==a&&"q"==d&&f==b}}));return!0===b.q}catch(c){return!1}};$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;
$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.SymbolClass=function(a,b){this.$jscomp$symbol$id_=a;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:b})};
$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};$jscomp.Symbol=function(){function a(c){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(c||"")+"_"+b++,c)}var b=0;return a}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};
$jscomp.makeIterator=function(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};$jscomp.owns=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var f=a[d];f in c||(c[f]={});c=c[f]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};
$jscomp.polyfill("WeakMap",function(a){function b(){if(!a||!Object.seal)return!1;try{var e=Object.seal({}),g=Object.seal({}),h=new a([[e,2],[g,3]]);if(2!=h.get(e)||3!=h.get(g))return!1;h["delete"](e);h.set(g,4);return!h.has(e)&&4==h.get(g)}catch(n){return!1}}function c(){}function d(e){if(!$jscomp.owns(e,k)){var g=new c;$jscomp.defineProperty(e,k,{value:g})}}function f(e){var g=Object[e];g&&(Object[e]=function(h){if(h instanceof c)return h;d(h);return g(h)})}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&
$jscomp.ES6_CONFORMANCE)return a}else if(b())return a;var k="$jscomp_hidden_"+Math.random();f("freeze");f("preventExtensions");f("seal");var m=0,l=function(e){this.id_=(m+=Math.random()+1).toString();if(e){e=$jscomp.makeIterator(e);for(var g;!(g=e.next()).done;)g=g.value,this.set(g[0],g[1])}};l.prototype.set=function(e,g){d(e);if(!$jscomp.owns(e,k))throw Error("WeakMap key fail: "+e);e[k][this.id_]=g;return this};l.prototype.get=function(e){return $jscomp.owns(e,k)?e[k][this.id_]:void 0};l.prototype.has=
function(e){return $jscomp.owns(e,k)&&$jscomp.owns(e[k],this.id_)};l.prototype["delete"]=function(e){return $jscomp.owns(e,k)&&$jscomp.owns(e[k],this.id_)?delete e[k][this.id_]:!1};return l},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(a){function b(){if($jscomp.ASSUME_NO_NATIVE_MAP||!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var e=Object.seal({x:4}),g=new a($jscomp.makeIterator([[e,"s"]]));if("s"!=g.get(e)||1!=g.size||g.get({x:4})||g.set({x:4},"t")!=g||2!=g.size)return!1;var h=g.entries(),n=h.next();if(n.done||n.value[0]!=e||"s"!=n.value[1])return!1;n=h.next();return n.done||4!=n.value[0].x||"t"!=n.value[1]||!h.next().done?!1:!0}catch(p){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(b())return a;$jscomp.initSymbolIterator();var c=new WeakMap,d=function(e){this.data_={};this.head_=m();this.size=0;if(e){e=$jscomp.makeIterator(e);for(var g;!(g=e.next()).done;)g=g.value,this.set(g[0],g[1])}};d.prototype.set=function(e,g){e=0===e?0:e;var h=f(this,e);h.list||(h.list=this.data_[h.id]=[]);h.entry?h.entry.value=g:(h.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:e,
value:g},h.list.push(h.entry),this.head_.previous.next=h.entry,this.head_.previous=h.entry,this.size++);return this};d.prototype["delete"]=function(e){e=f(this,e);return e.entry&&e.list?(e.list.splice(e.index,1),e.list.length||delete this.data_[e.id],e.entry.previous.next=e.entry.next,e.entry.next.previous=e.entry.previous,e.entry.head=null,this.size--,!0):!1};d.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=m();this.size=0};d.prototype.has=function(e){return!!f(this,e).entry};
d.prototype.get=function(e){return(e=f(this,e).entry)&&e.value};d.prototype.entries=function(){return k(this,function(e){return[e.key,e.value]})};d.prototype.keys=function(){return k(this,function(e){return e.key})};d.prototype.values=function(){return k(this,function(e){return e.value})};d.prototype.forEach=function(e,g){for(var h=this.entries(),n;!(n=h.next()).done;)n=n.value,e.call(g,n[1],n[0],this)};d.prototype[Symbol.iterator]=d.prototype.entries;var f=function(e,g){var h=g&&typeof g;"object"==
h||"function"==h?c.has(g)?h=c.get(g):(h=""+ ++l,c.set(g,h)):h="p_"+g;var n=e.data_[h];if(n&&$jscomp.owns(e.data_,h))for(e=0;e<n.length;e++){var p=n[e];if(g!==g&&p.key!==p.key||g===p.key)return{id:h,list:n,index:e,entry:p}}return{id:h,list:n,index:-1,entry:void 0}},k=function(e,g){var h=e.head_;return $jscomp.iteratorPrototype(function(){if(h){for(;h.head!=e.head_;)h=h.previous;for(;h.next!=h.head;)return h=h.next,{done:!1,value:g(h)};h=null}return{done:!0,value:void 0}})},m=function(){var e={};return e.previous=
e.next=e.head=e},l=0;return d},"es6","es3");var BLOCKED_SRC_ATTR="blocked-src",BTD_INLINE_IMAGE_PREFIX="btdimap://attachment",gImageLoadElements=[],gScaleInfo,gImagesToLoad=0,TRANSFORM_MINIMUM_EFFECTIVE_RATIO=.7,DEBUG_DISPLAY_TRANSFORMS=!1,gTransformText={},imageNodeToActionLogMap=new Map,isDef=function(a){return void 0!==a};function getTotalOffset(a){for(var b={left:0,top:0};a;)b.left+=a.offsetLeft,b.top+=a.offsetTop,a=a.offsetParent;return b}
function getAncestorByClassName(a,b){for(;a&&(!a.classList||!a.classList.contains(b));)a=a.parentNode;return a||null}function getAncestorByTagName(a,b){for(;a&&(!a.tagName||a.tagName.toLowerCase()!==b);)a=a.parentNode;return a||null}function getCachedValue(a,b,c){a.hasAttribute(c)?b=a.getAttribute(c):(b=a[b],a.setAttribute(c,b));return b}function onToggleMessageClick(a){onToggleClick(a,!1)}function onToggleQuotedClick(a){onToggleClick(a,!0)}
function onToggleClick(a,b){toggleNextElement(a.target,b);measurePositions(!1)}function toggleNextElement(a,b){var c=a.nextSibling,d="none"==getComputedStyle(c).display;a.innerHTML=getToggleText(d,b);c.style.display=d?"block":"none";d&&normalizeElementWidths([c])}function getToggleText(a,b){return b?a?MSG_HIDE_ELIDED:MSG_SHOW_ELIDED:a?MSG_HIDE_ORIGINAL:MSG_SHOW_ORIGINAL}
function collapseAllQuotedText(){processCollapsedMessageBodies(document.documentElement);processQuotedText(document.documentElement,!1)}function processCollapsedMessageBodies(a){a=a.getElementsByClassName("mail-message-toggle");for(var b=0,c;c=a[b];b++)c.innerHTML=MSG_SHOW_ORIGINAL,c.onclick=onToggleMessageClick}
function processQuotedText(a,b){a=a.getElementsByClassName("elided-text");for(var c,d=0,f;f=a[d];d++)c=document.createElement("div"),c.className="mail-elided-text",c.innerHTML=MSG_SHOW_ELIDED,c.setAttribute("dir","auto"),c.onclick=onToggleQuotedClick,f.style.display="none",f.parentNode.insertBefore(c,f),b&&toggleNextElement(c,!0)}function isConversationEmpty(a){var b;var c=0;for(b=a.length;c<b;c++){var d=a[c];d=d.textContent||d.innerText;if(0<d.trim().length)return!1}return!0}
function reloadImage(a){a=document.querySelectorAll('img[src="'+a+'"]');for(var b=0;b<a.length;b++)a[b].src=a[b].src}function normalizeAllMessageWidths(){var a=document.querySelectorAll(".expanded > .mail-message-content");var b=isConversationEmpty(a);normalizeElementWidths(a);a=document.getElementById("meta-viewport");var c=[a.getAttribute("content")];b?c.push(a.getAttribute("data-zoom-off")):c.push(a.getAttribute("data-zoom-on"));a.setAttribute("content",c.join(","))}
function normalizeElementWidths(a){var b,c;var d=document.body.offsetWidth;for(b=0;b<a.length;b++){var f=a[b];if(c=f.style.zoom)f.style.zoom=1;if(!transformContent(f,d,f.scrollWidth)&&NORMALIZE_MESSAGE_WIDTHS){c=f.scrollWidth;c=c>d?d/c:1;var k=f.classList.contains("mail-message-content")?1:(k=getAncestorByClassName(f,"mail-message-content"))?k.style.zoom:1;f.style.zoom=c/k}}}
function transformContent(a,b,c){var d=c;var f=[],k=[],m=!1,l=[];if(c<=b)return!0;var e=Date.now();if(a.parentElement.classList.contains("mail-message")){var g=a.parentElement.id;var h="[origW="+c+"/"+b}d=!1;d=ENABLE_MUNGE_TABLES?a.querySelectorAll("div[style], textarea[style]"):[];if(d=transformBlockElements(d,b,f))d=a.scrollWidth,console.log("ran div-width munger on el="+a+" oldW="+c+" newW="+d+" docW="+b),g&&(h+=" DIV:newW="+d),d<=b&&(m=!0);!m&&(d=ENABLE_MUNGE_IMAGES?a.querySelectorAll("img"):
[],d=transformImages(d,b,f))&&(d=a.scrollWidth,console.log("ran img munger on el="+a+" oldW="+c+" newW="+d+" docW="+b),g&&(h+=" IMG:newW="+d),d<=b&&(m=!0));!m&&(d=ENABLE_MUNGE_TABLES?a.querySelectorAll("table"):[],d=addClassToElements(d,shouldMungeTable,"munged",k))&&(d=a.scrollWidth,console.log("ran table munger on el="+a+" oldW="+c+" newW="+d+" docW="+b),g&&(h+=" TABLE:newW="+d),d<=b&&(m=!0));!m&&(d=ENABLE_MUNGE_TABLES?a.querySelectorAll("td"):[],d=addClassToElements(d,null,"munged",k))&&(d=a.scrollWidth,
console.log("ran td munger on el="+a+" oldW="+c+" newW="+d+" docW="+b),g&&(h+=" TD:newW="+d),d<=b?m=!0:(console.log("Revert table and td munger because it didn't help"),undoActions(k)));!m&&NORMALIZE_MESSAGE_WIDTHS&&(k=document.querySelectorAll("table"),l=zoomOutTables(k,b,f),0<l.length&&(l.forEach(function(n){n.node.style.display="none"}),d=a.scrollWidth,console.log("ran table zoom on el="+a+" oldW="+c+" newW="+d+" docW="+b),g&&(h+=" TABLEZOOM:newW="+d),d<=b&&(m=!0),l.forEach(function(n){n.node.style.display=
n.displayStyle})));if(m)return g&&(h+="]",h=(b=gTransformText[g])?b+" "+h:"Message transforms: "+h,gTransformText[g]=h,window.mail.onMessageTransform(g),DEBUG_DISPLAY_TRANSFORMS&&(g=a.firstChild,g.classList&&g.classList.contains("transform-text")||(g=document.createElement("div"),g.classList.add("transform-text"),g.style.fontSize="10px",g.style.color="#ccc",a.insertBefore(g,a.firstChild)),g.innerHTML=h+"<br>")),console.log("munger(s) succeeded, elapsed time="+(Date.now()-e)),!0;undoActions(f);0<f.length&&
console.log("all mungers failed, changes reversed. elapsed time="+(Date.now()-e));return!1}function undoActions(a){for(var b=0,c;c=a[b];b++)c[0].apply(c[1],c[2])}function addClassToElements(a,b,c,d){var f,k=!1;var m=0;for(f=a.length;m<f;m++){var l=a[m];b&&!b(l)||l.classList.contains(c)||(l.classList.add(c),k=!0,d.push([l.classList.remove,l.classList,[c]]))}return k}
function transformBlockElements(a,b,c){var d,f,k=!1;var m=0;for(d=a.length;m<d;m++){var l=a[m];var e=(f=l.style.width||l.style.minWidth)?f.indexOf("px"):-1;0<=e&&f.slice(0,e)>b&&(saveStyleProperty(l,"width",c),saveStyleProperty(l,"minWidth",c),saveStyleProperty(l,"maxWidth",c),l.style.width="100%",l.style.minWidth="",l.style.maxWidth=f,k=!0)}return k}
function transformImages(a,b,c){var d,f=!1,k=[];var m=0;for(d=a.length;m<d;m++){var l=a[m];if(!getAncestorByTagName(l,"table")){var e=l.offsetWidth;var g=l.offsetHeight;var h=l.getAttribute(BLOCKED_SRC_ATTR);var n=getMarginWidth(l);var p=h?2:0;e+n>b&&(h?(saveStyleProperty(l,"maxWidth",k),saveStyleProperty(l,"width",k),imageNodeToActionLogMap.set(l,k)):(saveStyleProperty(l,"maxWidth",c),saveStyleProperty(l,"width",c),saveStyleProperty(l,"height",c)),l.style.maxWidth=b-n-p+"px",l.style.width="100%",
null==h&&(l.style.height=5>g?g:"auto"),f=!0)}}return f}function getMarginWidth(a){var b=a.style.marginLeft;var c=a.style.marginRight;var d=0<=(b?b.indexOf("px"):-1)?parseInt(b):0;var f=c?c.indexOf("px"):-1;d+=0<=f?parseInt(c):0;console.log("nodeOffsetWidth is "+a.offsetWidth+", marginL is "+b+", marginR is "+c+", total margin is "+d);return d}
function zoomOutTables(a,b,c){var d=[];a=[].slice.call(a);a.forEach(function(f){f.classList.remove("zoom-out");f.style.zoom=1});a.forEach(function(f){if(!getAncestorByClassName(f,"zoom-out")){var k=b/f.scrollWidth;1>k&&(saveStyleProperty(f,"zoom",c),c.push([f.classList.remove,f.classList,["zoom-out"]]),f.style.zoom=k,f.classList.add("zoom-out"),console.log("zoomed out the table"),d.push({node:f,displayStyle:f.style.display}))}});return d}
function saveStyleProperty(a,b,c){var d="data-"+b;a.setAttribute(d,a.style[b]);c.push([undoSetProperty,a,[b,d]])}function undoSetProperty(a,b){this.style[a]=b?this.getAttribute(b):""}function shouldMungeTable(a){return a.hasAttribute("width")||a.style.width}function hideAllUnsafeImages(){hideUnsafeImages(document.getElementsByClassName("mail-message-content"))}
function hideUnsafeImages(a){var b,c,d=0,f=[],k=[];var m=0;for(b=a.length;m<b;m++){var l=a[m];var e=l.classList.contains("mail-show-images");var g=l.getElementsByTagName("img");gImagesToLoad=g.length;var h=0;for(c=g.length;h<c;h++){var n=g[h];var p=rewriteRelativeImageSrc(n),q=!1;if(p){f[d]=p;if(0==p.indexOf("https://mail.google.com")||0==p.indexOf("https://"+IMAP_INLINE_ATTACHMENT_AUTHORITY))blockImage(n),q=!0;k[d]=l.parentNode.id;d++}attachImageLoadListener(n);q||e&&(!p||"cid:"!=p.substring(0,4))||
blockImage(n)}}window.mail.onInlineAttachmentsParsed(f,k);if(0<f.length)window.mail.onImageLoadRequestsCreated(f.length)}function unblockAllTemporarilyHiddenImages(){var a,b;var c=document.getElementsByClassName("mail-message-content");var d=0;for(a=c.length;d<a;d++){var f=c[d];if(b=f.classList.contains("mail-show-images")){var k=f.getElementsByTagName("img");f=0;for(b=k.length;f<b;f++)unblockImage(k[f],"")}}}
function rewriteRelativeImageSrc(a){var b=a.src;return 0==b.indexOf(DOC_BASE_URI)&&DOC_BASE_URI!=CONVERSATION_BASE_URI?(b=CONVERSATION_BASE_URI+b.substring(DOC_BASE_URI.length),a.src=b):SAPI_INLINE_IMAGE_URL_PATTERN&&b.match(SAPI_INLINE_IMAGE_URL_PATTERN)?b:SAPI_IMAP_INLINE_IMAGE_URL_PATTERN&&b.match(SAPI_IMAP_INLINE_IMAGE_URL_PATTERN)?getReformattedImapInlineImageUrl(b):"cid:"==b.substring(0,4)?b:null}function attachImageLoadListener(a){var b=a.src;a.src="";a.onload=imageOnLoad;a.src=b}
function imageOnLoad(a){gImagesToLoad--;if(0===gImagesToLoad){for(var b=document.getElementsByClassName("gmail-ads-delayed-elements"),c=0;c<b.length;c++)b[c].style.visibility="visible";window.mail.onAllContentLoaded()}if(a&&a.target&&isDef(a.target.src))window.mail.onImageLoadFinished(a.target.src);if(a=getAncestorByClassName(a.target,"elided-text")||getAncestorByClassName(a.target,"mail-message-content"))0==gImageLoadElements.length&&window.setTimeout(handleAllImageOnLoads,0),-1==gImageLoadElements.indexOf(a)&&
gImageLoadElements.push(a)}function handleAllImageOnLoads(){normalizeElementWidths(gImageLoadElements);measurePositions(!1);window.mail.onAllImagesLoadFinished();gImageLoadElements=[]}function blockImage(a){var b=a.src;0==b.indexOf("http://")||0==b.indexOf("https://")||0==b.indexOf("content://")||0==b.indexOf("cid:")?(a.setAttribute(BLOCKED_SRC_ATTR,b),a.src="blocked"):0==b.indexOf(BTD_INLINE_IMAGE_PREFIX)&&(a.setAttribute(BLOCKED_SRC_ATTR,getReformattedImapInlineImageUrl(b)),a.src="blocked")}
function setWideViewport(){document.getElementById("meta-viewport").setAttribute("content","width="+WIDE_VIEWPORT_WIDTH)}function restoreScrollPosition(){var a=window.mail.getScrollYPercent();a&&document.body.offsetHeight>window.innerHeight&&(document.body.scrollTop=Math.floor(a*document.body.offsetHeight))}function onContentReady(a){restoreScrollPosition();window.mail.onContentReady()}
function setupContentReady(){if(ENABLE_CONTENT_READY&&!USE_DOM_CONTENT_LOADED_SIGNAL){var a=document.getElementById("initial-load-signal");a.addEventListener("webkitAnimationStart",onContentReady,!1);window.mail.createTracingInstant("InitialLoadListenerAdded")}}
function measurePositions(a){var b,c=0,d=document.querySelectorAll(".expanded > .mail-message-content");var f=Array(d.length+1);var k=Array(d.length+1);var m=0;for(b=d.length;m<b;m++){var l=d[m];var e=l.previousElementSibling;f[m]=c;k[m]=getTotalOffset(e).top+e.offsetHeight;c=getTotalOffset(l.nextElementSibling).top}f[m]=c;k[m]=document.documentElement.scrollHeight;a&&console.log("overlayTops: "+f.toString()+"; overlayBottoms: "+k.toString());window.mail.onWebContentGeometryChange(f,k)}
function unblockImages(a){for(var b,c,d=c=0,f;f=a[d];d++)if(b=document.getElementById(f)){var k=b.getElementsByClassName("mail-message-content")[0];k&&k.classList.add("mail-show-images");b=b.getElementsByTagName("img");c+=b.length;k=0;for(var m;m=b[k];k++)unblockImage(m,f)}else console.log("can't unblock, no matching message for id: "+f);if(0<c)window.mail.onImageLoadRequestsCreated(c)}
function unblockImage(a,b){var c;if(c=a.getAttribute(BLOCKED_SRC_ATTR)){var d=!1;if(0==c.indexOf("https://mail.google.com")||0==c.indexOf("https://"+IMAP_INLINE_ATTACHMENT_AUTHORITY))d=window.mail.downloadInlineAttachment(c,b);d?a.classList.add("loading-image"):(a.src=c,a.removeAttribute(BLOCKED_SRC_ATTR),undoImageActionLog(a))}}function undoImageActionLog(a){var b=imageNodeToActionLogMap.get(a);b&&(undoActions(b),imageNodeToActionLogMap["delete"](a))}
function setConversationHeaderSpacerHeight(a){var b=document.getElementById("conversation-header");b?(b.style.height=a+"px",measurePositions(!1)):console.log("can't set spacer for conversation header")}function setSmartMailCardSpacerHeight(a,b){(a=document.getElementById(a))?(a.style.height=b+"px",measurePositions(!1)):console.log("can't set spacer for smartmail card")}
function setConversationPromotionSpacerHeight(a){var b=document.getElementById("conversation-promotion");b?(b.style.height=a+"px",measurePositions(!1)):console.log("can't set spacer for conversation promotion")}function setConversationFooterSpacerHeight(a){var b=document.getElementById("conversation-footer");b?(b.style.height=a+"px",measurePositions(!1)):console.log("can't set spacer for conversation footer")}
function setMessageHeaderSpacerHeight(a,b){a=document.querySelector("#"+escapeMessageDomId(a)+" > .mail-message-header");setSpacerHeight(a,b)}function setMessageFooterSpacerHeight(a,b){a=document.querySelector("#"+escapeMessageDomId(a)+" > .mail-message-footer");setSpacerHeight(a,b)}function setSpacerHeight(a,b){a?(a.style.height=b+"px",measurePositions(!1)):console.log("can't set spacer height")}
function setMessageBodyVisible(a,b,c,d){var f,k=c?"block":"none";var m=escapeMessageDomId(a);var l=document.querySelector("#"+m),e=document.querySelectorAll("#"+m+" > .collapsible");if(l&&0!=e.length){l.classList.toggle("expanded");m=0;for(f=e.length;m<f;m++){var g=e[m];b?c?(g.style.display="block",g.style.position="",g.style.visibility="",g.style.top="",g.style.bottom="",g.style.zIndex="",g.style.left=""):(g.style.position="absolute",g.style.visibility="hidden",g.style.top="0",g.style.bottom="0",
g.style.zIndex="-999999999",g.style.left="-99999px"):g.style.display=k}c&&normalizeElementWidths(l.getElementsByClassName("mail-message-content"));setMessageHeaderSpacerHeight(a,d)}else console.log("can't set body visibility for message with id: "+a)}
function replaceSuperCollapsedBlock(a){var b,c;if(b=document.querySelector(".mail-super-collapsed-block[index='"+a+"']")){a=b.parentNode;b.innerHTML=window.mail.getTempMessageBodies();processCollapsedMessageBodies(b);processQuotedText(b,!1);hideUnsafeImages(b.getElementsByClassName("mail-message-content"));registerLinkHandlers(b);for(c=b.firstChild;c;)a.insertBefore(c,b),c=b.firstChild;a.removeChild(b);disablePostForms();measurePositions(!1)}else console.log("can't expand super collapsed block at index: "+
a)}function processNewMessageBody(a){processCollapsedMessageBodies(a);processQuotedText(a,!0);hideUnsafeImages([a]);registerLinkHandlers(a);getAncestorByClassName(a,"mail-message").classList.contains("expanded")&&normalizeElementWidths([a])}
function replaceMessageBodies(a){for(var b,c=0,d;d=a[c];c++)(b=document.querySelector("#"+escapeMessageDomId(d)+" > .mail-message-content"))?(b.innerHTML=window.mail.getMessageBody(d),processNewMessageBody(b)):console.log("Mail message content for msg "+d+" to replace not found.");disablePostForms();measurePositions(!1)}
function appendMessageHtml(){var a=document.createElement("div");a.innerHTML=window.mail.getTempMessageBodies();a=a.children[0];document.body.insertBefore(a,document.getElementById("conversation-footer"));processNewMessageBody(a.querySelector(".mail-message-content"));disablePostForms();measurePositions(!1)}
function disablePostForms(){var a=document.getElementsByTagName("FORM"),b,c;for(b=0;b<a.length;++b)if("POST"===a[b].method.toUpperCase()){a[b].onsubmit=function(){alert(MSG_FORMS_ARE_DISABLED);return!1};var d=a[b].elements;for(c=0;c<d.length;++c)"submit"!=d[c].type&&(d[c].disabled=!0)}}function findMailMessageNode(a){for(;(a=a.parentElement)&&!a.classList.contains("mail-message"););return a}
function encodeGmailLink(a){var b=a.getAttribute("href");if(!b)return null;var c=a.getAttribute("data-saferedirecturl")||"",d="";SAFELINKS_V2&&(d=a.getAttribute("data-saferedirectreason")||"");b="gmail-link://?url="+encodeURIComponent(b);c&&(b+="&safeRedirectUrl="+encodeURIComponent(c));d&&(b+="&safeRedirectReason="+encodeURIComponent(d));LOG_LINK_CLICKS&&(a=findMailMessageNode(a),null!=a&&(b+="&msgId="+encodeURIComponent(a.id)));return b}function isAnchorUrl(a){return"#"==a[0]}
function registerLinkHandlers(a){a=a.getElementsByTagName("A");for(var b=0;b<a.length;++b){var c=a[b],d=c.getAttribute("href");d&&!isAnchorUrl(d)&&c.addEventListener("click",linkHandler,!0)}}function linkHandler(a){var b=encodeGmailLink(a.currentTarget);b&&(window.location=b);a.preventDefault()}
function refreshInlineAttachment(a){for(var b=document.getElementsByTagName("img"),c=0;c<b.length;++c){var d=b[c],f=d.getAttribute(BLOCKED_SRC_ATTR);f&&f==a&&(d.removeAttribute(BLOCKED_SRC_ATTR),d.src=""!==ATTACHMENT_DOWNLOAD_FINISH_POSTFIX?f+"/"+ATTACHMENT_DOWNLOAD_FINISH_POSTFIX:f,d.classList.remove("loading-image"),undoImageActionLog(d))}}function escapeMessageDomId(a){a=replaceAll(a,"#","\\#");a=replaceAll(a,":","\\:");return a=replaceAll(a,"=","\\=")}
function replaceAll(a,b,c){return a.replace(new RegExp(b,"g"),c)}function getReformattedImapInlineImageUrl(a){return 0==!a.indexOf(BTD_INLINE_IMAGE_PREFIX)?null:"https://"+IMAP_INLINE_ATTACHMENT_AUTHORITY+"/"+a.substring(BTD_INLINE_IMAGE_PREFIX.length)}
if(!window.webkit){document.addEventListener("DOMContentLoaded",function(){window.mail.createTracingInstant("DOMContentLoaded");console.log("Measure positions upon DOMContentLoaded");measurePositions(!0);ENABLE_CONTENT_READY&&USE_DOM_CONTENT_LOADED_SIGNAL&&onContentReady(!1)});setupContentReady();for(var gAdDelayedElements=document.getElementsByClassName("gmail-ads-delayed-elements"),i=0;i<gAdDelayedElements.length;i++)gAdDelayedElements[i].style.visibility="hidden";collapseAllQuotedText();hideAllUnsafeImages();
normalizeAllMessageWidths();disablePostForms();console.log("Measure positions in script.js");measurePositions(!0);registerLinkHandlers(document)};
